{% extends 'base.html' %}

{% block title %}Заказ №{{ order.id }} {% endblock title %}

{% block content %}
    <div class="container mt-3">
        <p><strong>Заказ № {{ order.id }} Cтатус: {{ order.get_status_display }}</strong></p>
        <p><strong>Дата и время:</strong> {{ order.work_start }}</p>
        <p><strong>Адресс:</strong> {{ order.address | capfirst}}</p>
        <p><strong>Тип объекта:</strong> {{ order.object_type | capfirst }}</p>
        {% if extra_service %}
            <p><strong>Услуги Заказа:</strong></p>
            {% for extra in extra_service %}
                <ul>
                    <li>
                        <p>{{ extra | capfirst}}
                            <a href="{% url 'crmapp:service_order_update' extra.id %}"><i
                                    class="fa-solid fa-pen-to-square"></i></a>
                            <a class="text-danger" href="{% url 'crmapp:service_order_delete' extra.id %}"><i
                                    class="fa-solid fa-xmark"></i></a>
                        </p>
                    </li>
                </ul>
            {% endfor %}
        {% endif %}
        <p><a class="btn btn-primary" href="{% url 'crmapp:service_order_create' order.id %}">+Добавить
            услугу</a></p>
        <p><strong>Общее время работы:</strong> {{ order.cleaning_time }} ч.</p>
        <span><strong>Клинеры на объекте:</strong></span>
        {% for cleaner in order.cleaners.all %}
            <a style="text-decoration: none"
               href="{% url 'accounts:profile' cleaner.id %}"> {{ cleaner.last_name }} {{ cleaner.first_name }}</a>
            {% if not forloop.last %}, {% else %}. {% endif %}
        {% endfor %}
        <br>
        <br>
        <p><strong>Вид оплаты: </strong>{{ order.get_payment_type_display }}</p>
        <h5><strong>Общая стоимость: {{ order.get_total }} с </strong> </h5>
        <hr>
        <p>Менеджер: {{ order.manager.last_name }} {{ order.manager.first_name }}</p>
        <small class="text-muted">Заказ создан: {{ order.created_at }}</small>
    </div>
{% endblock content %}